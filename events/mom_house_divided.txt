namespace = mom_house_divided

#gamestart
event = {
	id = mom_house_divided.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		any_country = {
			has_origin = origin_mom_house_divided
		}		
	}
	
	immediate = {
		random_country = {
			limit = {
				has_origin = origin_mom_house_divided
			}
			save_event_target_as = mom_house_divided_country
			set_country_flag = first_alien_life
			set_country_flag = Story3
			capital_scope = {
				solar_system = {
					every_system_planet = {
						limit = {
							OR = {
								AND = {
									has_deposit_for = shipclass_mining_station
									has_mining_station = no
								}
								AND = {
									has_deposit_for = shipclass_research_station
									has_research_station = no
								}								
							}
						}
						IF = {
							limit = {
								has_deposit_for = shipclass_research_station
							}
							create_research_station = {
								owner = event_target:mom_house_divided_country
							}
						}
						IF = {
							limit = {
								has_deposit_for = shipclass_mining_station
							}
							create_mining_station = {
								owner = event_target:mom_house_divided_country
							}
						}
					}
				}
			}
		}
		every_system = {
			limit = {
				has_star_flag = mom_house_divided_systems
				NOT = {
					any_system_planet = {
						OR = {
							has_planet_flag = mom_house_divided_colony_1
							has_planet_flag = mom_house_divided_colony_2
						}
					}
				}
			}
			every_system_planet = {
				surveyed = {
					set_surveyed = yes
					surveyor = event_target:mom_house_divided_country
				} 
			}
			create_starbase = {
				size = starbase_outpost
				owner = event_target:mom_house_divided_country
			}
			every_system_planet = {
				limit = {
					OR = {
						has_deposit_for = shipclass_mining_station
						has_deposit_for = shipclass_research_station
					}
				}
				If = {
					limit = {
						has_deposit_for = shipclass_research_station
					}
					create_research_station = {
						owner = event_target:mom_house_divided_country
					}
				}
				IF = {
					limit = {
						has_deposit_for = shipclass_mining_station
					}
					create_mining_station = {
						owner = event_target:mom_house_divided_country
					}
				}
			}
		}
		random_planet = {
			limit = {
				has_planet_flag = mom_house_divided_colony_1
			}
			create_colony = {
				owner = event_target:mom_house_divided_country
			}
			while = {
				count = 25
				create_pop = {
					species = owner_main_species
				}
			}
			create_mom_hd_defector_1 = yes
		}
		random_planet = {
			limit = {
				has_planet_flag = mom_house_divided_colony_2
			}
			create_colony = {
				owner = event_target:mom_house_divided_country
			}
			while = {
				count = 25
				create_pop = {
					species = owner_main_species
				}
			}
			create_mom_hd_defector_2 = yes
		}
	}
}